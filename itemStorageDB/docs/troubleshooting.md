## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. **–î–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ ID** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `product_by_id`
2. **–î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –±—Ä–µ–Ω–¥—É** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `products_by_brand`  
3. **–î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `products_by_category`
4. **–î–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `product_by_id` —Å `ALLOW FILTERING`
5. **–ò–∑–±–µ–≥–∞–π—Ç–µ –ø–æ–ª–Ω—ã—Ö —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π** - –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –≤ WHERE

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `migrations/`:
- `00_drop_tables.cql` - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ç–∞–±–ª–∏—Ü
- `01_create_tables.cql` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ö–µ–º—ã
- `03_insert_data.cql` - –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

## 2. `docs/troubleshooting.md`

```markdown
# –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ ScyllaDB

## üö® –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø—É—Å–∫–æ–º –∫–ª–∞—Å—Ç–µ—Ä–∞

#### ‚ùå –û—à–∏–±–∫–∞: "AIO max-nr"
**–°–∏–º–ø—Ç–æ–º—ã:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è, –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö –ø—Ä–æ AIO
```bash
ERROR: unable to create new AIO context: Resource temporarily unavailable
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –î–ª—è WSL2
wsl --shutdown
wsl -u root -e bash -c "echo 262144 > /proc/sys/fs/aio-max-nr"

# –î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
echo "fs.aio-max-nr = 262144" | sudo tee -a /etc/sysctl.conf
sudo sysctl -p
```

#### ‚ùå –û—à–∏–±–∫–∞: –ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç—ã –≤ `docker-compose.yml` –∏–ª–∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç–µ –ø–æ—Ä—Ç—ã:
```bash
# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –ø–æ—Ä—Ç—ã
sudo lsof -i :9042
sudo lsof -i :9043  
sudo lsof -i :9044

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
sudo kill -9 <PID>
```

---

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é

#### ‚ùå –û—à–∏–±–∫–∞: "Network not found"
```bash
ERROR: Network scylla-net not found
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–µ—Ç—å –≤—Ä—É—á–Ω—É—é
docker network create --driver=bridge --subnet=10.5.0.0/16 scylla-net

# –ò–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
docker-compose down
docker network rm scylla-net
docker-compose up -d
```

#### ‚ùå –û—à–∏–±–∫–∞: –£–∑–ª—ã –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
**–°–∏–º–ø—Ç–æ–º—ã:** `nodetool status` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —É–∑–µ–ª

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
docker network inspect scylla-net

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä
docker-compose restart

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
docker logs scylla-node1
```

---

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

#### ‚ùå –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã –≤ `docker-compose.yml`:
```yaml
command: >
  --smp 4                # –£–≤–µ–ª–∏—á–∏—Ç—å —è–¥—Ä–∞
  --memory 4G            # –£–≤–µ–ª–∏—á–∏—Ç—å –ø–∞–º—è—Ç—å
```

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –∑–∞–ø—Ä–æ—Å—ã:
```sql
-- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ EXPLAIN –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
EXPLAIN SELECT * FROM products_by_brand WHERE brand = 'Apple';
```

#### ‚ùå –û—à–∏–±–∫–∞: "Read timeout"
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã:
```bash
# –í CQLSH
cqlsh --request-timeout=600

# –í –¥—Ä–∞–π–≤–µ—Ä–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π - —É–≤–µ–ª–∏—á—å—Ç–µ timeout settings
```

---

### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–∞–Ω–Ω—ã–º–∏

#### ‚ùå –û—à–∏–±–∫–∞: "Keyspace does not exist"
```bash
InvalidRequest: Error from server: code=2200 [Invalid query] 
message="Keyspace 'ecommerce' does not exist"
```

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
./scripts/run_migrations.sh
```

#### ‚ùå –û—à–∏–±–∫–∞: "Unconfigured table"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ keyspace
DESC KEYSPACE ecommerce;

-- –ï—Å–ª–∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
ALTER KEYSPACE ecommerce WITH replication = {
    'class': 'SimpleStrategy', 
    'replication_factor': 3
};
```

---

### 5. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

#### ‚ùå CQLSH –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —É–∑–ª–∞
docker exec scylla-node1 nodetool status

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º IP
cqlsh 10.5.0.2 9042

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall
sudo ufw status
```

#### ‚ùå –û—à–∏–±–∫–∞: "Unable to connect to any servers"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —É–∑–ª–∞
docker logs scylla-node1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç—å
docker exec scylla-node1 ping 10.5.0.3
```

---

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞
```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —É–∑–ª–æ–≤
docker exec scylla-node1 nodetool status

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Ç–µ—Ä–µ
docker exec scylla-node1 nodetool describecluster

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
docker exec scylla-node1 nodetool cfstats
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```bash
# –¢–æ–ø –∫–ª—é—á–µ–π –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤
docker exec scylla-node1 nodetool tablestats

# –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–∞–∫—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
docker exec scylla-node1 nodetool compactionstats

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker exec scylla-node1 nodetool tpstats
```

### –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
docker exec scylla-node1 nodetool verify

# –†–µ–º–æ–Ω—Ç —É–∑–ª–∞
docker exec scylla-node1 nodetool repair

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
docker exec scylla-node1 nodetool flush
```

---

## üìä –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É–∑–ª–∞
docker logs scylla-node1 --tail 100 -f

# –õ–æ–≥–∏ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ –æ—à–∏–±–∫–∞–º
docker logs scylla-node1 2>&1 | grep -i error
```

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
# –ò–∑–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
nodetool setlogginglevel org.apache.cassandra DEBUG

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ —É—Ä–æ–≤–Ω–∏
nodetool getlogginglevels
```

---

## üÜò –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏

### –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –∫–ª–∞—Å—Ç–µ—Ä–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ
docker-compose down -v
docker network rm scylla-net

# –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ö–æ—Å—Ç–µ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
sudo rm -rf /var/lib/docker/volumes/scylla-cluster_*

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
./scripts/init_cluster.sh
./scripts/run_migrations.sh
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —É–∑–µ–ª
docker restart scylla-node1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
docker exec scylla-node1 nodetool repair

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
docker exec scylla-node1 nodetool rebuild
```

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ScyllaDB](https://docs.scylladb.com/)
- [ScyllaDB University](https://university.scylladb.com/)
- [Community Forum](https://forum.scylladb.com/)
- [Stack Overflow](https://stackoverflow.com/questions/tagged/scylla)

---

## üéØ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –∫–ª–∞—Å—Ç–µ—Ä–∞
./scripts/health_check.sh

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–∏–Ω —É–∑–µ–ª
docker restart scylla-node1

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
docker exec scylla-node1 nodetool cfstats ecommerce

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
cqlsh localhost 9042 -e "DESC KEYSPACES"
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—à–µ–Ω–∏—è–ºÂ∏∏ËßÅ –ø—Ä–æ–±–ª–µ–º! üõ†Ô∏è
```

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫! üìö
